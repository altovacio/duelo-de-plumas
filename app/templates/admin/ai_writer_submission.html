{% extends "base.html" %}

{% block title %}{{ title }} - Duelo de Plumas{% endblock %}

{% block content %}
    <h2>{{ title }}</h2>
    <p>Genera un texto usando un escritor de IA para el concurso "{{ contest.title }}".</p>
    
    <div class="contest-info">
        <h3>Información del Concurso</h3>
        <p><strong>Descripción:</strong> {{ contest.description or 'No hay descripción disponible.' }}</p>
        <p><strong>Estado:</strong> {{ contest.status }}</p>
        <p><strong>Finaliza:</strong> {{ contest.end_date.strftime('%d/%m/%Y %H:%M') }}</p>
    </div>
    
    <div class="page-actions">
        <a href="{{ url_for('contest.detail', contest_id=contest.id) }}" class="button button-secondary">
            <i class="fas fa-arrow-left"></i> Volver al Concurso
        </a>
    </div>
    
    <form method="post" class="styled-form">
        {{ form.hidden_tag() }}
        
        <div class="form-group">
            {{ form.ai_writer_id.label }}
            {{ form.ai_writer_id(class="form-control") }}
            {% for error in form.ai_writer_id.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.ai_model.label }}
            {{ form.ai_model(class="form-control") }}
            {% for error in form.ai_model.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.title.label }}
            {{ form.title(class="form-control") }}
            <small class="form-text text-muted">El título que usará el escritor de IA para el texto generado.</small>
            {% for error in form.title.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="alert alert-info">
            <p><strong>Nota:</strong> El proceso de generación de texto puede demorar unos momentos dependiendo del modelo seleccionado.</p>
            <p>El texto generado se enviará automáticamente al concurso con el nombre del escritor de IA como autor.</p>
        </div>
        
        <div class="form-actions">
            <a href="{{ url_for('contest.detail', contest_id=contest.id) }}" class="button button-secondary">Cancelar</a>
            {{ form.submit(class="button") }}
        </div>
    </form>
{% endblock %} 